(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-card-card_create-card_create"],{1918:function(e,t,r){e.exports=r.p+"static/img/card_create_bg.4cdcac58.jpg"},2036:function(e,t,r){"use strict";var a=r("f823"),n=r.n(a);n.a},"23af":function(e,t,r){"use strict";r.r(t);var a=r("df7c"),n=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);t["default"]=n.a},"295e":function(e,t,r){"use strict";r.r(t);var a=r("97e7"),n=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);t["default"]=n.a},"2ca9":function(e,t,r){var a=r("f383");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("4f06").default;n("2d7c0a45",a,!0,{sourceMap:!1,shadowMode:!1})},"4917c":function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 左右留白边距 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.user-avatar[data-v-c6a5c942]{width:%?120?%;height:%?120?%;background:#fff;border:%?5?% solid #fff;border-radius:50%;overflow:hidden}.user-avatar .image[data-v-c6a5c942]{width:100%;height:100%}',""])},6271:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"card-create-page"},[r("v-uni-view",{staticClass:"card-create"},[r("v-uni-text",{staticClass:"title"},[e._v("用一张名片")]),r("v-uni-text",{staticClass:"title"},[e._v("开启的无限可能")]),r("v-uni-form",{staticClass:"form",on:{submit:function(t){t=e.$handleEvent(t),e.submit(t)}}},[r("v-uni-view",{staticClass:"avatar"},[r("pack-user-avatar",{attrs:{src:e.user.avatar}})],1),r("v-uni-view",{staticClass:"form-input"},[r("v-uni-text",{staticClass:"label"},[e._v("姓名")]),r("v-uni-input",{attrs:{placeholder:"请输入您的姓名",name:"name"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),r("v-uni-view",{staticClass:"form-input"},[r("v-uni-text",{staticClass:"label"},[e._v("手机")]),r("v-uni-input",{attrs:{placeholder:"请输入您的手机号",name:"mobile",type:"number"},on:{input:function(t){t=e.$handleEvent(t),e.phoneInput(t)}},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1),e.mobileStatus?r("v-uni-view",{staticClass:"form-input"},[r("v-uni-text",{staticClass:"label"},[e._v("验证码")]),r("v-uni-view",{staticClass:"form-box"},[r("v-uni-input",{attrs:{name:"code",placeholder:"请输入验证码",type:"number"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),e.leftTime<=0?r("v-uni-text",{staticClass:"gray timer",on:{click:function(t){t=e.$handleEvent(t),e.sendCode(t)}}},[e._v("获取")]):r("v-uni-text",{staticClass:"gray timer"},[e._v(e._s(e.leftTime)+"s")])],1)],1):e._e(),r("v-uni-view",{staticClass:"form-input",on:{click:function(t){t=e.$handleEvent(t),e.selectBrand(t)}}},[r("v-uni-text",{staticClass:"label"},[e._v("品牌")]),r("v-uni-view",{staticClass:"brand-select"},[e.user.brand_id?r("v-uni-text",[e._v(e._s(e.user.brand.name))]):r("v-uni-text",{staticClass:"gray"},[e._v("请选择品牌")]),r("v-uni-text",{staticClass:"iconfont gray"},[e._v("")])],1)],1),r("v-uni-view",{staticClass:"btn-box"},[r("v-uni-button",{staticClass:"btn",attrs:{loading:e.loading,"form-type":"submit"}},[e._v("创建名片")])],1)],1)],1)],1)},n=[];r.d(t,"a",function(){return a}),r.d(t,"b",function(){return n})},"62b8":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"user-avatar"},[r("v-uni-image",{staticClass:"image",attrs:{src:e.avatar,mode:""}})],1)},n=[];r.d(t,"a",function(){return a}),r.d(t,"b",function(){return n})},"97e7":function(e,t,r){"use strict";(function(e){var a=r("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("7f7f");var n=a(r("bd01")),i=a(r("c90b")),s={components:{packUserAvatar:n.default},data:function(){return{user:{},mobileStatus:!1,code:"",leftTime:0,timer:null,loading:!1}},onShow:function(){var e=this;this.$store.dispatch("reloadUserInfo").then(function(t){e.mobileStatus=!!t.mobile,e.user=t})},methods:{phoneInput:function(e){var t=e.detail.value,r=[{name:"mobile",checkType:"phone",checkRule:"",errorMsg:"手机号格式错误"}];this.mobileStatus=i.default.check({mobile:t},r)},sendCode:function(){var t=this;this.$http.auth("sms",{type:"register",mobile:this.user.mobile}).then(function(r){r.data&&(t.leftTime=r.data.second?r.data.second:0,t.leftTime>0&&t.setTimer(),r.data.code&&e.toast("验证码为:"+r.data.code))}).catch(function(e){})},setTimer:function(){var e=this;clearInterval(this.timer),this.timer=setInterval(function(){e.leftTime--,e.leftTime<=0&&(e.leftTime=0,clearInterval(e.timer))},1e3)},submit:function(t){var r=this;if(!this.loading){var a=[{name:"name",checkType:"notnull",checkRule:"",errorMsg:"请输入您的姓名"},{name:"mobile",checkType:"notnull",checkRule:"",errorMsg:"请输入您的手机号"}],n=t.detail.value;console.log(n);var s=i.default.check(n,a);if(s){if(!this.mobileStatus)return void e.toast("手机号格式不正确");if(!this.code)return void e.toast("请输入验证码");this.loading=!0,this.$http.auth("card_create",{username:this.user.name,mobile:this.user.mobile,code:this.code}).then(function(t){r.loading=!1,e.toast("创建成功",function(){uni.switchTab({url:"/pages/card/card/card"})})}).catch(function(e){r.loading=!1})}else uni.showToast({title:i.default.error,icon:"none"}),this.loading=!1}},selectBrand:function(){uni.navigateTo({url:"/pages/brand/brand_select/brand_select?from=create"})}}};t.default=s}).call(this,r("c8ba"))},b041:function(e,t){e.exports=function(e){return"string"!==typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},bd01:function(e,t,r){"use strict";r.r(t);var a=r("62b8"),n=r("23af");for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);r("2036");var s=r("2877"),c=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"c6a5c942",null);t["default"]=c.exports},c90b:function(e,t,r){"use strict";r("c5f6"),r("28a5"),r("3b2b"),r("7f7f"),e.exports={error:"",check:function(e,t){for(var r=0;r<t.length;r++){if(!t[r].checkType)return!0;if(!t[r].name)return!0;if(!t[r].errorMsg)return!0;if(!e[t[r].name])return this.error=t[r].errorMsg,!1;switch(t[r].checkType){case"string":var a=new RegExp("^.{"+t[r].checkRule+"}$");if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"int":a=new RegExp("^(-[1-9]|[1-9])[0-9]{"+t[r].checkRule+"}$");if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"between":if(!this.isNumber(e[t[r].name]))return this.error=t[r].errorMsg,!1;var n=t[r].checkRule.split(",");if(n[0]=Number(n[0]),n[1]=Number(n[1]),e[t[r].name]>n[1]||e[t[r].name]<n[0])return this.error=t[r].errorMsg,!1;break;case"betweenD":a=/^-?[1-9][0-9]?$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;n=t[r].checkRule.split(",");if(n[0]=Number(n[0]),n[1]=Number(n[1]),e[t[r].name]>n[1]||e[t[r].name]<n[0])return this.error=t[r].errorMsg,!1;break;case"betweenF":a=/^-?[0-9][0-9]?.+[0-9]+$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;n=t[r].checkRule.split(",");if(n[0]=Number(n[0]),n[1]=Number(n[1]),e[t[r].name]>n[1]||e[t[r].name]<n[0])return this.error=t[r].errorMsg,!1;break;case"same":if(e[t[r].name]!=t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"notsame":if(e[t[r].name]==t[r].checkRule)return this.error=t[r].errorMsg,!1;break;case"email":a=/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"phoneno":a=/^1[0-9]{10,10}$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"zipcode":a=/^[0-9]{6}$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"reg":a=new RegExp(t[r].checkRule);if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"in":if(-1==t[r].checkRule.indexOf(e[t[r].name]))return this.error=t[r].errorMsg,!1;break;case"notnull":if(null==e[t[r].name]||e[t[r].name].length<1)return this.error=t[r].errorMsg,!1;break;case"phone":a=/^1\d{10}$/;if(!a.test(e[t[r].name]))return this.error=t[r].errorMsg,!1;break}}return!0},isNumber:function(e){var t=/^-?[1-9][0-9]?.?[0-9]*$/;return t.test(e)}}},df7c:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={props:{src:{type:String,default:"/static/avatar_default.jpeg"}},computed:{avatar:function(){return this.src?this.src:"/static/avatar_default.jpeg"}}};t.default=a},ef0e:function(e,t,r){"use strict";r.r(t);var a=r("6271"),n=r("295e");for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);r("f19f");var s=r("2877"),c=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"f87dc70a",null);t["default"]=c.exports},f19f:function(e,t,r){"use strict";var a=r("2ca9"),n=r.n(a);n.a},f383:function(e,t,r){var a=r("b041");t=e.exports=r("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 左右留白边距 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.card-create-page[data-v-f87dc70a],uni-page-body[data-v-f87dc70a]{height:100%;width:100%}.card-create-page[data-v-f87dc70a]{background-size:100% auto;background-repeat:no-repeat;background-image:url('+a(r("1918"))+")}.card-create[data-v-f87dc70a]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding-top:15%}.card-create .title[data-v-f87dc70a]{font-size:%?35?%;color:#fff}.card-create .gray[data-v-f87dc70a]{color:grey}.card-create .avatar[data-v-f87dc70a]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:%?40?% 0 %?20?% 0}.card-create .form-input[data-v-f87dc70a]{width:60%;border:%?1?% solid #ccc;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:%?40?% auto;padding:%?10?% %?20?%;border-radius:%?40?%;background-color:#fff}.card-create .form-input .label[data-v-f87dc70a]{min-width:%?100?%;margin:0 %?10?%;color:#6d6d72}.card-create .form-input .form-box[data-v-f87dc70a]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.card-create .form-input .timer[data-v-f87dc70a]{border:%?1?% solid #f6375b;border-radius:%?15?%;padding:0 %?10?%;white-space:nowrap;background-color:#f6375b;color:#fff;font-size:%?24?%}.card-create .brand-select[data-v-f87dc70a]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.card-create .btn-box .btn[data-v-f87dc70a]{width:66%;font-size:%?28?%;color:#fff;background-color:#f6375b;border-radius:%?40?%}",""])},f823:function(e,t,r){var a=r("4917c");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=r("4f06").default;n("09fbf0af",a,!0,{sourceMap:!1,shadowMode:!1})}}]);